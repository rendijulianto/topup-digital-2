@extends('web.layout.app')
@section('title', 'Topup Dompet Digital')
@section('breadcrumb')
<div class="row">
    <div class="col-12">
        <div class="page-title-box">
            <h4 class="page-title">
                Halaman Topup Dompet Digital
            </h4>
        </div>
    </div>
</div>
@endsection
@section('content')
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h4>
                    <i class="{{$icon}} fa-xl"></i>
                    Topup Dompet Digital
                </h4>
              
            </div>
        </div> <!-- end card -->
    </div> <!-- end col -->
    <div class="col-12">
        <div class="row" id="brand">
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="#" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="#" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="#" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="#" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="#" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="#" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="#" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="#" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="#" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="#" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="#" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="#" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>
<!-- end row -->
@endsection
@section('script')
<script>

    const getBrands = () => {
        $.ajax({
                url: "{{route('api.brands.category')}}",
                type: "GET",
                data: {
                    category: '{{$category}}'
                },
                beforeSend: function(){
                
                },
                success: function(response){
                    if(response.status == true){
                        $('#brand').html('');
                        $.each(response.data, function(index, brand){
                            let link = `{{route('topup.create.brand', ['category' => ':category', 'brand' => ':id'])}}?isCustomer={{request()->isCustomer}}`;
                            
                            link = link.replace(':category', '{{strtolower($category)}}');
                            link = link.replace(':id', brand.name.toLowerCase());
                            $('#brand').append(`
                            <div class="col-lg-3">
                                <a class="card" href="${link}">
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                                        <div class="mb-3">
                                            <img src="${brand.logo_url}"
                                            alt="" class="img-e-wallet">
                                        </div>
                                        <label for="" class="mb-2">${brand.name}</label>
                                        <div class="rounded w-100">
                                            <button class="btn btn-primary
                                            w-100"><i class="fa fa-plus-circle"></i> Pilih Topup</button>
                                    
                                        </div>
                                    </div>
                                </a>
                            </div>
                            `);
                        });
                    }else{
                        $('#brand').html('<option disabled selected>Brand tidak tersedia</option>');
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: response.message,
                        })
                    }
                },
                error: function(response){
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: 'Terjadi kesalahan pada server',
                    })
                    $('#brand').html('<option disabled selected>Brand tidak tersedia</option>');
                },
                complete: function(){
                  
                }
        })
    }

    $(document).ready(function(){
        getBrands();
    });
</script>
@endsection
