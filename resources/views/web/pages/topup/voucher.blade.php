@extends('web.layout.app')
@section('title', Str::ucfirst('Voucher Fisik'))
@section('breadcrumb')
<div class="row">
    <div class="col-12">
        <div class="page-title-box">
            <h4 class="page-title">
            Halaman Voucher Fisik
            </h4>
        </div>
    </div>
</div>
@endsection
@section('content')
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h4>
                    <i class="fa fa-ticket"></i> Daftar Brand Voucher Fisik
                </h4>
              
            </div>
        </div> <!-- end card -->
    </div> <!-- end col -->
    <div class="col-12">
        <div class="row" id="brand">
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="//placekitten.com/300/200" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="//placekitten.com/300/200" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="//placekitten.com/300/200" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="//placekitten.com/300/200" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="//placekitten.com/300/200" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="//placekitten.com/300/200" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="//placekitten.com/300/200" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="//placekitten.com/300/200" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="//placekitten.com/300/200" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="//placekitten.com/300/200" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="//placekitten.com/300/200" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-3 loading-skeleton">
                <a class="card" href="">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="mb-3">
                            <img src="//placekitten.com/300/200" alt="" class="img-e-wallet">
                        </div>
                        <label for="" class="mb-2">
                            Layanan 1
                        </label>
                        <div class="rounded w-100">
                            <button class="btn btn-primary
                            w-100">Topup </button>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>
<!-- end row -->
@endsection
@section('script')
<script>

    const getBrands = () => {
        $.ajax({
                url: "{{route('api.brands.category')}}",
                type: "GET",
                data: {
                    kategori: 'Aktivasi Voucher'
                },
                beforeSend: function(){
                
                },
                success: function(response){
                    if(response.status == true){
                        $('#brand').html('');
                        $.each(response.data, function(index, brand){
                       
                            let link = `{{route('voucher.brand', ['brand' => ':id'])}}?isGuest={{request()->isGuest}}`;
                            link = link.replace(':id', brand.nama.toLowerCase().replace(' ', '-'));
                            $('#brand').append(`
                            <div class="col-lg-3">
                                <a class="card" href="${link}">
                                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                                        <div class="mb-3">
                                            <img src="${brand.logo_url}"
                                            alt="" class="img-e-wallet">
                                        </div>
                                        <label for="" class="mb-2">${brand.nama}</label>
                                        <div class="rounded w-100">
                                            <button class="btn btn-primary
                                            w-100"><i class="fa fa-ticket"></i> 
                                            Pilih Voucher</button>
                                    
                                        </div>
                                    </div>
                                </a>
                            </div>
                            `);
                        });
                    }else{
                        $('#brand').html('<option disabled selected>Brand tidak tersedia</option>');
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: response.message,
                        })
                    }
                },
                error: function(response){
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: 'Terjadi kesalahan pada server',
                    })
                    $('#brand').html('<option disabled selected>Brand tidak tersedia</option>');
                },
                complete: function(){
                  
                }
        })
    }

    $(document).ready(function(){
        getBrands();
    });
</script>
@endsection
